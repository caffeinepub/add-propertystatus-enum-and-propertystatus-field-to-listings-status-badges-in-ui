{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "Upgrade platform listing model and UI to support a new dynamic PropertyStatus system (separate from existing availability), as a foundation for future IST dual-confirmation booking flow.",
  "architectural_notes": [
    "Introduce a new PropertyStatus enum (available, visitCompleted, underConfirmation, bookedViaSTYO) separate from existing Listing.availability; store as Listing.propertyStatus with default 'available' for existing and new listings.",
    "Backend listings currently stored in an in-memory Map in backend/main.mo; propertyStatus will be persisted wherever Listing is persisted (currently within that map)."
  ],
  "known_issues": [],
  "isFixRequest": false,
  "existing_features": [
    {
      "id": "feature-frontend-update-generated-consumed-backend-types-so-the-frontend-listing-type-includes-propertystatus-and-the-frontend-can-render-it-without-typescript-errors",
      "title": "Frontend: Update generated/consumed backend types so the frontend `Listing` type includes `propertyStatus` and the frontend can render it without TypeScript errors.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-frontend-add-a-dynamic-propertystatus-badge-to-the-property-card-component-frontend-src-components-listingcard-tsx-that-reflects-the-listing-s-propertystatus-value-with-clear-english-labels-available-visit-completed-under-confirmation-booked-via-styo",
      "title": "Frontend: Add a dynamic `propertyStatus` badge to the property card component (`frontend/src/components/ListingCard.tsx`) that reflects the listing’s `propertyStatus` value with clear English labels: \"Available\", \"Visit Completed\", \"Under Confirmation\", \"Booked via STYO\".",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-frontend-add-a-dynamic-propertystatus-badge-to-the-property-detail-page-current-route-unlock-listingid-frontend-src-pages-unlockpage-tsx-that-reflects-the-listing-s-propertystatus-value-using-the-same-4-english-labels",
      "title": "Frontend: Add a dynamic `propertyStatus` badge to the property detail page (current route `/unlock/$listingId`, `frontend/src/pages/UnlockPage.tsx`) that reflects the listing’s `propertyStatus` value using the same 4 English labels.",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-scope-guard-do-not-implement-any-ist-dual-confirmation-or-automatic-status-update-logic-yet-only-add-the-4-status-model-and-ui-display",
      "title": "Scope guard: Do not implement any IST dual-confirmation or automatic status-update logic yet; only add the 4-status model and UI display.",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Add PropertyStatus enum and propertyStatus field to backend Listing model (default available) and display dynamic status badges on property card and property detail page; keep existing availability unchanged; no confirmation logic yet.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Backend: Add a new enum type `PropertyStatus` with exactly these variants: `#available`, `#visitCompleted`, `#underConfirmation`, `#bookedViaSTYO`.",
      "reqIds": [
        "REQ-1"
      ],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Backend: Extend the `Listing` record to include a new field `propertyStatus : PropertyStatus` while keeping the existing `availability` field unchanged.",
      "reqIds": [
        "REQ-2"
      ],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Backend: Ensure default value for `propertyStatus` is `#available` for (a) all newly created listings and (b) all existing listings returned by queries (including any demo listings, if present), without changing existing `availability` values.",
      "reqIds": [
        "REQ-3"
      ],
      "status": "pending"
    }
  ],
  "projectName": "Add PropertyStatus enum and propertyStatus field to listings + status badges in UI",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}